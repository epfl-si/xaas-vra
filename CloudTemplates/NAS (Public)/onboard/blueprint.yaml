name: Onboard NAS Volume
version: 1.1.3
formatVersion: 1
inputs:
  projectId:
    type: string
    title: Project Id
  projectName:
    type: string
    title: Project Name
  requestor:
    type: string
    title: Requestor
  notificationMail:
    type: string
    title: Notification Mail
  reasonsForRequest:
    type: string
    title: Reason for request
    default: I need that!
  deploymentTag:
    type: string
    title: Environment
    enum:
      - Development
      - Test
      - Production
    default: Test
  volType:
    type: string
    title: Volume Type
    enum:
      - col
      - app
  svm:
    type: string
    name: vServer
  sizeGB:
    type: string
    name: Volume Size (GB)
    default: 1
  access:
    type: string
    name: Access protocol
  snapPolicy:
    type: string
    title: Snapshot Policy
  snapPercent:
    type: string
    title: Snapshot Percent
    default: '0'
  IPsRO:
    type: string
    title: RO Access Policy
    default: ''
  IPsRW:
    type: string
    title: RW Access Policy
    default: ''
  IPsRoot:
    type: string
    title: Root Access Policy
    default: ''
  volName:
    type: string
    title: Volume Name
    default: ''
  volId:
    type: string
    title: Volume Id
  fnsPrjName:
    type: string
    title: FNS Project Name
    default: ''
  fnsPrjNo:
    type: string
    title: FNS Project Number
    default: ''

resources:
  Volume:
    type: Custom.XaasNas.Volume
    properties:
      # vRA fields
      projectId: '${input.projectId}'
      projectName: '${input.projectName}'
      deploymentTag: '${input.deploymentTag}'
      creationPolicy: 'onboard'
      deletionPolicy: 'delete'
      notificationMail: '${input.notificationMail}'
      requestor: '${input.requestor}'
      reasonsForRequest: '${input.reasonsForRequest}'
      # funding (optional):
      fnsPrjName: '${input.fnsPrjName}'
      fnsPrjNo: '${input.fnsPrjNo}'
      # volume fields
      access: '${input.access}'
      volType: '${input.volType}'
      volName: '${input.volName}'
      volId: '${input.volId}'
      svm: '${input.svm}'
      sizeGB: '${input.sizeGB}'
      snapPolicy: '${input.snapPolicy}'
      snapPercent: '${input.snapPercent}'
      IPsRoot: '${input.IPsRoot}'
      IPsRO: '${input.IPsRO}'
      IPsRW: '${input.IPsRW}'
      webwebdavAccess: 'disabled'
      data: ''

