name: S3 Bucket
version: 1.1.3
formatVersion: 1
inputs:
  # vRA fields
  dplyName:
    type: string
    title: Deployment name
  dplyDescription:
    type: string
    title: Deployment Description

  projectName:
    type: string
    title: Project name
  projectId:
    type: string
    title: Project Id
  env:
    type: string
    title: Environment
    enum:
      - development
      - test
      - production
    default: test
  notificationMail:
    type: string
    title: Notification Mail
  requestor:
    type: string
    title: Requestor
  reasonsForRequest:
    type: string
    title: Reasons for request

  # funding (optional)
  fnsPrjName:
    type: string
    title: FNS Project Name
    default: ''
  fnsPrjNo:
    type: string
    title: FNS Project Number
    default: ''

  # buc,ket
  linkedTo:
    type: string
    title: Linked to
    default: ''
  versioning:
    type: string
    title: Versioning?
    enum:
      - Suspended
      - Active
    default: Suspended

resources:
  Bucket:
    type: Custom.XaasS3.Bucket
    properties:
      # vRA fields
      dplyName: '${input.dplyName}'
      dplyDescription: '${input.dplyDescription}'
      projectId: '${input.projectId}'
      projectName: '${input.projectName}'
      env: '${input.env}'
      creationPolicy: request
      deletionPolicy: outboard
      notificationMail: '${input.notificationMail}'
      requestor: '${input.requestor}'
      reasonsForRequest: '${input.reasonsForRequest}'
      # funding (optional):
      fnsPrjName: '${input.fnsPrjName}'
      fnsPrjNo: '${input.fnsPrjNo}'
      # bucket
      linkedTo: '${input.linkedTo}'
      versioning: '${input.versioning}'
